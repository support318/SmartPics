function _slicedToArray(r,e){return _arrayWithHoles(r)||_iterableToArrayLimit(r,e)||_unsupportedIterableToArray(r,e)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(r,a){var t;if(r)return"string"==typeof r?_arrayLikeToArray(r,a):"Map"===(t="Object"===(t={}.toString.call(r).slice(8,-1))&&r.constructor?r.constructor.name:t)||"Set"===t?Array.from(r):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?_arrayLikeToArray(r,a):void 0}function _arrayLikeToArray(r,a){(null==a||a>r.length)&&(a=r.length);for(var e=0,n=Array(a);e<a;e++)n[e]=r[e];return n}function _iterableToArrayLimit(r,l){var t=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var e,n,i,u,a=[],f=!0,o=!1;try{if(i=(t=t.call(r)).next,0===l){if(Object(t)!==t)return;f=!1}else for(;!(f=(e=i.call(t)).done)&&(a.push(e.value),a.length!==l);f=!0);}catch(r){o=!0,n=r}finally{try{if(!f&&null!=t.return&&(u=t.return(),Object(u)!==u))return}finally{if(o)throw n}}return a}}function _arrayWithHoles(r){if(Array.isArray(r))return r}function _typeof(o){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o})(o)}affiliatewp.attach("modal",{instance:null,contents:[],supportedContents:["image","video","html","ajax"],settings:{enableHashNavigation:!0,draggable:!0,showThumbs:!0,slug:"",startIndex:0,groupAttr:"data-grouped",groupAll:!1,autoFocus:!0,dragToClose:!0,idle:3500,parentEl:null,keyboard:{Escape:"close",Delete:"close",Backspace:"close",PageUp:"next",PageDown:"prev",ArrowUp:"prev",ArrowDown:"next",ArrowRight:"next",ArrowLeft:"prev"}},eventQueue:{},show:function(){var contents=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[];return this.updateSettings(1<arguments.length&&void 0!==arguments[1]?arguments[1]:{}),this.setContents(contents),this.instance&&_typeof(this.instance.hasOwnProperty("destroy"))&&(this.instance.destroy(),this.instance=null),this.initializeModal(),this.initializeCustomEvents(),this},bind:function(selectorOrElement,filterSelectorOrSettings){var settings=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},events={on:this.getEventsObject()};if((1===arguments.length||2===arguments.length&&"object"===_typeof(filterSelectorOrSettings))&&"string"!=typeof selectorOrElement)throw new Error("AffiliateWPModal.bind: Expected string as the first argument, got ".concat(_typeof(selectorOrElement)));if(2<=arguments.length&&"string"==typeof filterSelectorOrSettings&&!(selectorOrElement instanceof Element))throw new Error("AffiliateWPModal.bind: Expected Element as the first argument, got ".concat(_typeof(selectorOrElement)));if(2<=arguments.length&&selectorOrElement instanceof Element&&"string"!=typeof filterSelectorOrSettings)throw new Error("AffiliateWPModal.bind: Expected string as the second argument, got ".concat(_typeof(filterSelectorOrSettings)));return 1===arguments.length?Fancybox.bind(selectorOrElement,events):2===arguments.length&&"object"===_typeof(filterSelectorOrSettings)?Fancybox.bind(selectorOrElement,affiliatewp.parseArgs(this.parseSettings(filterSelectorOrSettings),events)):2===arguments.length&&"string"==typeof filterSelectorOrSettings?Fancybox.bind(selectorOrElement,filterSelectorOrSettings,events):3<=arguments.length&&Fancybox.bind(selectorOrElement,filterSelectorOrSettings,affiliatewp.parseArgs(this.parseSettings(settings),events)),this},maybeStartFromHash:function(){var hash,slug,HashPlugin=Fancybox.Plugins.Hash;HashPlugin&&!this.instance&&(hash=(HashPlugin=HashPlugin.parseURL()).hash,slug=HashPlugin.slug,hash&&slug===this.settings.slug?(this.settings.startIndex=HashPlugin.index-1,this.show()):(HashPlugin=this.contents.findIndex(function(slide){return slide.slug===slug}),hash&&-1<HashPlugin&&(this.settings.startIndex=HashPlugin,this.show())))},setContents:function(){var _this=this,contents=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[];if(Array.isArray(contents))return contents=contents.filter(function(item,index){return item.hasOwnProperty("src")?!(!item.hasOwnProperty("type")||!_this.supportedContents.includes(item.type))||(console.error("Modal invalid type for item index ".concat(index,". Ignoring item...")),!1):(console.error("Modal src not found for item index ".concat(index,". Ignoring item...")),!1)}),this.contents=contents,this;throw new Error("Contents must be an array of objects.")},updateSettings:function(settings){var _this2=this;if("object"!==_typeof(settings))throw new Error("Settings must be an object.");return Object.entries(this.parseSettings(settings)).forEach(function(_ref){var _ref=_slicedToArray(_ref,2),key=_ref[0];_this2.settings[key]=_ref[1]}),this},parseSettings:function(settings){var settingsMap={enableHashNavigation:{type:"boolean",fancyboxName:"Hash",defaultValueOnTrue:!0,defaultValueOnFalse:!1},showThumbs:{type:"boolean",fancyboxName:"Thumbs",defaultValueOnTrue:!0,defaultValueOnFalse:!1},draggable:{type:"boolean",fancyboxName:"Carousel",defaultValueOnTrue:null,defaultValueOnFalse:{Panzoom:{touch:!1}}}};return Object.entries(settings).reduce(function(result,_ref3){var settingOptions,_ref3=_slicedToArray(_ref3,2),settingName=_ref3[0],_ref3=_ref3[1];return settingsMap.hasOwnProperty(settingName)&&("boolean"===(settingOptions=settingsMap[settingName]).type&&!0===_ref3&&null!==settingOptions.defaultValueOnTrue&&(result[settingOptions.fancyboxName]=settingOptions.defaultValueOnTrue),"boolean"===settingOptions.type)&&!1===_ref3&&null!==settingOptions.defaultValueOnFalse&&(result[settingOptions.fancyboxName]=settingOptions.defaultValueOnFalse),result[settingName]=_ref3,result},{})},onInit:function(callback){return this.addToEventQueue("init",callback),this},onDone:function(callback){return this.addToEventQueue("done",callback),this},onLoading:function(callback){return this.addToEventQueue("loading",callback),this},onClose:function(callback){return this.addToEventQueue("close",callback),this},initializeModal:function(){Array.isArray(this.contents)&&this.contents.length&&(this.instance=new Fancybox(this.contents,this.settings))},getCustomEvents:function(){return{close:"onClose",init:"onInit",done:"onDone",loading:"onLoading"}},initializeCustomEvents:function(){var _this3=this;null!==this.instance&&Object.entries(this.getEventsObject()).forEach(function(_ref5){var _ref5=_slicedToArray(_ref5,2),eventName=_ref5[0];_this3.instance.on(eventName,_ref5[1])})},getEventsObject:function(){var _this4=this,customEvents=this.getCustomEvents(),events={};return Object.entries(customEvents).forEach(function(_ref7){var _ref7=_slicedToArray(_ref7,2),eventName=_ref7[0];"function"==typeof _this4[_ref7[1]]&&(events[eventName]=function(){_this4.executeEventQueue(eventName)})}),events},addToEventQueue:function(eventName,callback){this.eventQueue[eventName]||(this.eventQueue[eventName]=[]),this.eventQueue[eventName].push(callback)},executeEventQueue:function(eventName){eventName=this.eventQueue.hasOwnProperty(eventName)?this.eventQueue[eventName]:[];Array.isArray(eventName)&&eventName.forEach(function(callback){"function"==typeof callback&&callback()})}});