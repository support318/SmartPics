function _typeof(o){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o})(o)}jQuery(document).ready(function($){var file_frame;window.formfield="";function showHoldingPeriodModal(title,confirmation_callback){!function(title,content,argument_2){jQuery.alert(jQuery.extend({title:title,content:content,backgroundDismiss:!0,icon:"fa fa-info-circle",type:"lightgreen",boxWidth:420,useBootstrap:!1,theme:"modern,affiliatewp-education",closeIcon:!0,draggable:!1,dragWindowBorder:!1,keyboardEnabled:!0},2<arguments.length&&void 0!==argument_2?argument_2:{}))}(title,affwp_vars.holdingPeriodModal.content,{icon:"fa fa-warning",onKeydown:function(event){if(27===event.which&&this.close(),13===event.which)return event.preventDefault(),!1},buttons:{payNow:{text:affwp_vars.holdingPeriodModal.confirm,action:confirmation_callback,disabled:!1,btnClass:"btn-confirm"},cancel:{text:affwp_vars.holdingPeriodModal.cancel,action:function(){this.close()},disabled:!1,btnClass:"btn"}}})}function maybe_activate_migrate_users_button(){var checked=$("#affiliate-wp-migrate-user-accounts input:checkbox:checked").length,$button=$("#affiliate-wp-migrate-user-accounts input[type=submit]");0<checked?$button.prop("disabled",!1):$button.prop("disabled",!0)}if(void 0!==$.fn.select2&&(($select2Elements=$(".affwp-use-select2")).closest("tr").addClass("affwp-select2-initialized"),$select2Elements.each(function(){var $element=$(this),options={width:"resolve",minimumResultsForSearch:10},select2SettingsAttr=(void 0!==$element.data("minimum-results-for-search")&&(options.minimumResultsForSearch=parseInt($element.data("minimum-results-for-search"),10)),$element.attr("data-select2-settings"));if(select2SettingsAttr)try{var select2Settings=JSON.parse(select2SettingsAttr);void 0!==select2Settings.minimum_results_for_search&&(options.minimumResultsForSearch=parseInt(select2Settings.minimum_results_for_search,10)),select2Settings.placeholder&&(options.placeholder=select2Settings.placeholder,options.allowClear=!0),!0===select2Settings.tags&&(options.tags=!0),void 0!==select2Settings.allow_clear&&(options.allowClear=select2Settings.allow_clear),select2Settings.width&&(options.width=select2Settings.width)}catch(e){"undefined"!=typeof SCRIPT_DEBUG&&SCRIPT_DEBUG&&console.error("Failed to parse select2 settings:",e)}$element.data("placeholder")&&(options.placeholder=$element.data("placeholder"),options.allowClear=!0),!0===$element.data("tags")&&(options.tags=!0),$element.select2(options)}),$(".affwp-select2-initialized label").on("click",function(){var $select=$(this).closest("tr").find("select:first");$select.hasClass("select2-hidden-accessible")&&$select.select2("open")})),$("body").on("click",".affwp_settings_upload_button",function(e){e.preventDefault();e=$(this);window.formfield=$(this).prev(),file_frame||((file_frame=wp.media.frames.file_frame=wp.media({frame:"post",state:"insert",title:e.data("uploader_title"),button:{text:e.data("uploader_button_text")},multiple:!1})).on("menu:render:default",function(view){view.unset("library-separator"),view.unset("gallery"),view.unset("featured-image"),view.unset("embed"),view.set({})}),file_frame.on("insert",function(){file_frame.state().get("selection").each(function(attachment,index){attachment=attachment.toJSON(),window.formfield.val(attachment.url);attachment=new CustomEvent("mediaURLChanged",{detail:{url:attachment.url}});document.dispatchEvent(attachment)})})),file_frame.open()}),window.formfield="",$(".affwp-referrals-export-toggle").click(function(){$(".affwp-referrals-export-toggle").toggle(),$("#affwp-referrals-export-form").slideToggle()}),$(".affwp-datepicker").length&&$(".affwp-datepicker").datepicker({dateFormat:"mm/dd/yy"}),$(".affwp-user-search").each(function(){var $all_input_fields,$all_fields_excluding_search,$this=$(this),$search=$this.val(),$status=$this.data("affwp-status"),$form=$this.closest("form"),$submit=$form.find(":submit.button-primary"),$submit_default_value=$submit.val(),$user_creation_fields=$(".affwp-user-email-wrap, .affwp-user-pass-wrap"),$on_complete_enabled=$this.hasClass("affwp-enable-on-complete");!0===$on_complete_enabled&&($all_input_fields=$form.find("input, select"),$all_fields_excluding_search=$all_input_fields.not($this)),$this.on("input",function(){$user_creation_fields.hide()}),$this.autocomplete({source:ajaxurl+"?action=affwp_search_users&term="+$search+"&status="+$status,messages:{noResults:$on_complete_enabled?"":"No users found"},delay:500,minLength:2,position:{offset:"0, -1"},search:function(){$this.hasClass("affwp-enable-on-complete")&&($("div.notice").remove(),$user_creation_fields.hide())},open:function(){$this.addClass("open")},close:function(){$this.removeClass("open")},response:function(event,ui){0===ui.content.length&&$this.hasClass("affwp-enable-on-complete")?($('<div class="notice notice-error affwp-new-affiliate-error"><p>'+affwp_vars.no_user_found+"</p></div>").insertAfter($this),wp.a11y.speak(affwp_vars.no_user_found,"polite"),$form.find("input, select").prop("disabled",!1),$(".affwp-user-email-wrap, .affwp-user-pass-wrap").show(),$(".affwp-user-email").prop("required"),$(".search-description").hide(),$submit.val(affwp_vars.user_and_affiliate_input)):wp.a11y.speak(affwp_vars.valid_user_selected,"polite")},select:function(){$this.hasClass("affwp-enable-on-complete")&&$.ajax({type:"POST",url:ajaxurl,data:{action:"affwp_check_user_login",user:$this.val()},dataType:"json",success:function(response){response.success&&(!1===response.data.affiliate?$form.find("input, select"):(response='<a href="'+response.data.url+'">'+affwp_vars.view_affiliate+"</a>",$('<div class="notice notice-info affwp-new-affiliate-error"><p>'+affwp_vars.existing_affiliate+" "+response+"</p></div>").insertAfter($this),$this)).prop("disabled",!1)}}).fail(function(response){window.console&&window.console.log&&console.log(response)})}}),!0===$on_complete_enabled&&$this.on("input",function(){$all_fields_excluding_search.prop("disabled",!0),$submit.val($submit_default_value)})}),$("body").on("click",".upload_image_button",function(e){e.preventDefault();var formfield=$(this).prev();file_frame||((file_frame=wp.media.frames.file_frame=wp.media({frame:"select",title:"Choose Image",multiple:!1,library:{type:"image"},button:{text:"Use Image"}})).on("menu:render:default",function(view){view.unset("library-separator"),view.unset("gallery"),view.unset("featured-image"),view.unset("embed"),view.set({})}),file_frame.on("select",function(){var attachment=file_frame.state().get("selection").first().toJSON(),img=(formfield.val(attachment.url),$("<img />"));img.attr("src",attachment.url),$("#preview_image").empty().append(img),$("#preview_image img")&&$("#preview_image").show()})),file_frame.open()}),$("body").on("click",".affiliates_page_affiliate-wp-referrals .delete",function(e){return!!confirm(affwp_vars.confirm_delete_referral)}),$(".affiliates_page_affiliate-wp-referrals .affwp-pay-now-via-paypal.affwp-holding-period").on("click",function(e){e.preventDefault();var payNowLink=$(this).attr("href");showHoldingPeriodModal(affwp_vars.holdingPeriodModal.rowActionsTitle,function(){this.close(),window.location.href=payNowLink})}),$(".affiliates_page_affiliate-wp-referrals #doaction, .affiliates_page_affiliate-wp-referrals #doaction2").on("click",function(e){var action,hasHoldingPeriod;"doaction"===this.id?action=$('#affwp-referrals-filter-form select[name="action"]').val():"doaction2"===this.id&&(action=$('#affwp-referrals-filter-form select[name="action2"]').val()),"pay_now"===action&&(e.preventDefault(),hasHoldingPeriod=!1,$(".referrals.affwp-table tbody tr").each(function(){var $row=$(this);return 0===$row.find(".check-column input:checked").length||0===$row.find(".affwp-holding-period").length||!(hasHoldingPeriod=!0)}),hasHoldingPeriod?showHoldingPeriodModal(affwp_vars.holdingPeriodModal.bulkActionsTitle,function(){this.close(),$("#affwp-referrals-filter-form").off("submit").submit()}):$("#affwp-referrals-filter-form").off("submit").submit())}),maybe_activate_migrate_users_button(),$("body").on("change","#affiliate-wp-migrate-user-accounts input:checkbox",function(){maybe_activate_migrate_users_button()}),$("#affwp_add_affiliate #status").change(function(){"active"==$(this).val()?$("#affwp-welcome-email-row").show():($("#affwp-welcome-email-row").hide(),$("#affwp-welcome-email-row #welcome_email").prop("checked",!1))}),$("#generate-coupon-code-button").on("click",function(event){event.preventDefault(),$.ajax({type:"POST",url:ajaxurl,data:{action:"affwp_generate_coupon_code",affiliate_id:$(this).data("affiliate_id")},dataType:"json",success:function(response){response.success&&response.data.coupon_code&&$("#coupon_code").val(response.data.coupon_code)}})}),"?page=affiliate-wp-settings&tab=coupons"===window.location.search){for(var returnLivePreviewText=function(text){var customText;return text=(text=(text=(text=(text=(text=text.replace("{coupon_code}","FGFUVCQOK1")).replace("{user_name}","CREATIVELABS")).replace("{first_name}","BOB")).replace("{coupon_amount}","10")).replace("{custom_text}",""===(customText=document.getElementById("affwp_settings[coupon_custom_text]").value)?"TEXT":customText.replace(/[^0-9a-z]/gi,""))).toUpperCase(),!0===checkHyphenDelimiterSetting()?text:text.replace(/-/g,"")},updateCouponFormatOptions=function(){var hyphenSettingChecked=checkHyphenDelimiterSetting(),formatOptions=document.getElementById("affwp_settings[coupon_format]").options;if(!0===hyphenSettingChecked)for(var index=0;index<formatOptions.length;index++)formatOptions[index].text=returnLivePreviewText(couponFormatOptions[index]);else for(index=0;index<formatOptions.length;index++)formatOptions[index].text=formatOptions[index].text.replace(/-/g,"")},checkHyphenDelimiterSetting=function(){return $("input[id='affwp_settings[coupon_hyphen_delimiter]']").is(":checked")},resetCFSelectedOption=function(){var formatValue=$("select[id='affwp_settings[coupon_format]'] option:selected")[0].value;!1===checkHyphenDelimiterSetting()&&(formatValue=formatValue.replace(/-/g,"")),$("select[id='affwp_settings[coupon_format]'] option:selected")[0].text=formatValue},formatOptions=document.getElementById("affwp_settings[coupon_format]").options,couponFormatOptions=[],option=0;option<formatOptions.length;option++)couponFormatOptions.push(formatOptions[option].text),formatOptions[option].text=returnLivePreviewText(couponFormatOptions[option]);resetCFSelectedOption(),$("select[id='affwp_settings[coupon_format]']").on("change",function(event){updateCouponFormatOptions(),resetCFSelectedOption()}),$("input[id='affwp_settings[coupon_hyphen_delimiter]']").on("click",function(event){updateCouponFormatOptions(),resetCFSelectedOption()}),$("input[id='affwp_settings[coupon_custom_text]']").on("keyup",function(){for(var i=0;i<formatOptions.length;i++)formatOptions[i].text=returnLivePreviewText(couponFormatOptions[i])})}$(".affwp-promo-notice").each(function(){var notice=$(this),noticeId=notice.data("id"),nonce=notice.data("nonce"),lifespan=notice.data("lifespan");notice.on("click",".notice-dismiss, .affwp-notice-dismiss",function(event){wp.ajax.send("affwp_dismiss_promo",{data:{notice_id:noticeId,nonce:nonce,lifespan:lifespan},success:function(){notice.slideUp("fast");var uid=userSettings.uid||0;window.localStorage.removeItem("affwp-notice-"+noticeId+"-seen-"+uid)}})})});var $select2Elements,uid,seenKey,flatRateBasisField,affwpShouldFieldBeVisible,affwpIsVisible,$captchaRadios,$captchaOptions,qrPreviewEl,qrSettings,inputHandler,getColorSettings,updateColors,contexts,prevType,topOfPageNotice=jQuery(".affwp-admin-notice-top-of-page");function updateInfoBoxVisibility(){var selectedValue=$captchaRadios.filter(":checked").val(),$captchaInfos=$(".captcha-selector__info-box"),$infoBoxContainer=$(".captcha-selector__info-boxes"),$captchaConfigRows=$("tr[data-captcha-type]");$captchaOptions.removeClass("captcha-selector__option--selected"),$captchaOptions.filter('[data-value="'.concat(selectedValue,'"]')).addClass("captcha-selector__option--selected"),$captchaInfos.hide(),$captchaConfigRows.not("[data-visibility]").addClass("affwp-hidden").removeClass("affwp-visible"),selectedValue&&"none"!==selectedValue?($('.captcha-selector__info-box[data-captcha-type="'.concat(selectedValue,'"]')).show(),$infoBoxContainer.removeClass("captcha-selector__info-boxes--hidden"),$captchaConfigRows.filter('[data-captcha-type="'.concat(selectedValue,'"], [data-captcha-type="all"]')).not("[data-visibility]").removeClass("affwp-hidden").addClass("affwp-visible")):$infoBoxContainer.addClass("captcha-selector__info-boxes--hidden")}0<topOfPageNotice.length&&($select2Elements=topOfPageNotice.detach(),jQuery("#wpbody-content").prepend($select2Elements),uid=userSettings.uid||0,seenKey="affwp-notice-"+$select2Elements.data("id")+"-seen-"+uid,window.localStorage.getItem(seenKey)?$select2Elements.show():setTimeout(function(){window.localStorage.setItem(seenKey,!0),topOfPageNotice.slideDown()},1500)),-1<$.inArray(pagenow,["affiliates_page_affiliate-wp-affiliates","affiliates_page_affiliate-wp-settings"])&&("affiliates_page_affiliate-wp-settings"===pagenow?(flatRateBasisField=$(".affwp-referral-rate-type-field"),$('input[name="affwp_settings[referral_rate_type]"]')):(flatRateBasisField=$("#flat_rate_basis").closest("tr"),$("#rate_type"))).on("change",function(e){"flat"!==e.target.value?flatRateBasisField.hide():flatRateBasisField.show()}),-1<$.inArray(pagenow,["affiliates_page_affiliate-wp-settings"])&&(affwpShouldFieldBeVisible=function(fieldVal,expectedVal,compare){return!(!["==","==="].includes(compare)||fieldVal!=expectedVal)||!(!["!=","<>"].includes(compare)||fieldVal==expectedVal)||!("in"!==compare||!Array.isArray(expectedVal)||!expectedVal.includes(fieldVal))},affwpIsVisible=function($field,expectedValue,comparison){var tag;return $field.get(0)?"INPUT"===(tag=$field.get(0).tagName)&&"radio"===$field.attr("type")?affwpShouldFieldBeVisible($field.filter(":checked").val(),expectedValue,comparison):"INPUT"===tag&&"checkbox"===$field.attr("type")?affwpShouldFieldBeVisible($field.is(":checked"),expectedValue,comparison):"SELECT"===tag?affwpShouldFieldBeVisible($field.val(),expectedValue,comparison):void 0:""},$(".affwp-accordion").each(function(){var $accordion=$(this);$accordion.find("> .affwp-accordion-item > .affwp-accordion-title").on("click",function(e){e.stopPropagation();e=$(this).parent();void 0!==$accordion.data("toggle")&&e.siblings().not(e.get(0)).addClass("affwp-accordion-collapsed"),e.toggleClass("affwp-accordion-collapsed")})}),$("tr[data-visibility]").each(function(){function toggleVisibility(){evaluateRules(ruleset.rule)?$row.addClass("affwp-visible").removeClass("affwp-hidden"):$row.removeClass("affwp-visible").addClass("affwp-hidden")}var $row=$(this),$form=$("#affwp-settings-form"),ruleset=$row.data("visibility"),getField=(Array.isArray(ruleset.rule)||(ruleset.rule=[ruleset.rule]),function(rule){var requiredOption=rule.required_option||!1;return!1!==requiredOption?$form.find('[name="affwp_settings['.concat(rule.required_field,"][").concat(requiredOption,']"]')):$form.find('[name="affwp_settings['.concat(rule.required_field,']"]'))}),evaluateRules=function(rules){return rules.every(function(rule){var $field=getField(rule),comparison=rule.compare||"==";return affwpIsVisible($field,rule.value,comparison)})};toggleVisibility(),ruleset.rule.forEach(function(rule){getField(rule).on("change",toggleVisibility)})}),$(".affwp-captcha-options-wrapper").length&&($captchaRadios=$('input[name="affwp_settings[captcha_type]"]'),$captchaOptions=$(".captcha-selector__option"),$captchaRadios.length)&&($captchaOptions.on("click",function(){$(this).data("value");$(this).find(".captcha-selector__option-input").prop("checked",!0).trigger("change")}),$captchaRadios.on("change",updateInfoBoxVisibility),updateInfoBoxVisibility()),$(".affwp-section[data-visibility]").each(function(){function toggleSectionVisibility(){affwpIsVisible($field,ruleset.value,comparison)?$section.addClass("affwp-visible").removeClass("affwp-hidden"):$section.removeClass("affwp-visible").addClass("affwp-hidden")}var $section=$(this),$form=$("#affwp-settings-form"),ruleset=$section.data("visibility"),$field=$form.find('input[name="affwp_settings['.concat(ruleset.required_field,']"]')),comparison=ruleset.hasOwnProperty("compare")?ruleset.compare:"==";toggleSectionVisibility(),$field.on("change",toggleSectionVisibility)}),$("#affwp-settings-form select").each(function(){var $select=$(this),$row=$select.closest("tr");["portal_menu_links","affiliate_area_tabs_list"].includes($row.attr("id"))||$row.hasClass("affwp-ignore-select2")||$select.closest("div").hasClass("affwp-ignore-select2")||$row.hasClass("affwp-select2-initialized")||($row.addClass("affwp-select2-initialized"),$select.select2(affiliatewp.parseArgs($select.data("select2-settings")||{},{width:"240px",minimumResultsForSearch:10,templateResult:function(option){return option.id&&option.element&&option.element.classList.contains("addProBadge")?$("<span>".concat(option.text,'</span><span class="affwp-settings-label-pro">PRO</span>')):option.text},templateSelection:function(option){return option.id&&option.element&&option.element.classList.contains("addProBadge")?$("<span>".concat(option.text,'</span><span class="affwp-settings-label-pro">PRO</span>')):option.text}})).on("change",function(e){$(document).trigger("affiliatewp_on_select_change",[e])}))}),$(".affwp-select2-initialized label").on("click",function(){var $select=$(this).closest("tr").find("select:first");$select.hasClass("select2-hidden-accessible")&&$select.select2("open")})),"undefined"!=typeof postboxes&&/affiliate-wp/.test(pagenow)&&postboxes.add_postbox_toggles(pagenow),-1<$.inArray(pagenow,["affiliates_page_affiliate-wp-about"])&&$(".affwp-action-button").on("click",function(){var buttonOriginalText,buttonOriginalClasses,action,$actionContainer,showNotice,$button=$(this);$button.hasClass("disabled")||($button.hasClass("status-go-to-url")?window.open($button.data("plugin"),"_blank"):(buttonOriginalText=$button.text(),buttonOriginalClasses=$button.attr("class"),action=$button.hasClass("status-missing")?"affwp_install_plugin":"affwp_activate_plugin",$actionContainer=$button.closest(".affwp-addon-action"),showNotice=function($container,status,content){$container.addClass("affwp-addon-action--"+status).attr("data-content",content).delay(2500).queue(function(){$(this).removeAttr("data-content").removeClass("affwp-addon-action--"+status)})},$.ajax({type:"POST",url:ajaxurl,data:{action:action,nonce:affwp_about_vars.nonce,plugin:$button.data("plugin")},dataType:"json",beforeSend:function(){$button.html("&nbsp;").removeAttr("class").addClass("affwp-action-button button button-secondary disabled loading")},success:function(response){response.success?($button.text(affwp_about_vars.i18n.activated),$actionContainer.find(".status-label").removeClass("status-inactive").addClass("status-active").text(affwp_about_vars.i18n.active),showNotice($actionContainer,"ok","affwp_activate_plugin"==action?affwp_about_vars.i18n.pluginActivated:affwp_about_vars.i18n.pluginInstalledAndActivated)):($button.text(buttonOriginalText).removeAttr("class").addClass(buttonOriginalClasses),showNotice($actionContainer,"error",response.data))},complete:function(){$button.removeClass("loading")}}).fail(function(response){$button.text(buttonOriginalText).removeAttr("class").addClass(buttonOriginalClasses),showNotice($actionContainer,"error",affwp_about_vars.i18n.genericError)})))}),-1<$.inArray(pagenow,["affiliates_page_affiliate-wp-creatives"])&&("undefined"!=typeof affiliatewp&&affiliatewp.has("qrcode")&&($("#the-list .column-preview").each(function(){var $qrCode=$(this).find(".affwp-qrcode-preview");affiliatewp.qrcode($qrCode.get(0),$qrCode.data("url"),affiliatewp.parseArgs("object"===_typeof($qrCode.data("settings"))?$qrCode.data("settings"):{},{width:80,height:80,margin:3,errorCorrectionLevel:"H"}))}),qrPreviewEl=document.getElementById("qr-preview"))&&(qrSettings=affiliatewp.parseArgs(qrPreviewEl.dataset.settings?JSON.parse(qrPreviewEl.dataset.settings):{color:{dark:"#444444",light:"#FFFFFF"}},{width:200,height:200,margin:3}),affiliatewp.qrcode(qrPreviewEl,affwpCreativeUrls.creativeUrl,qrSettings),getColorSettings=function(){return{dark:$("#qrcode-code-color").val(),light:$("#qrcode-bg-color").val()}},updateColors=function(){var color=getColorSettings(),existingQR=qrPreviewEl.firstChild;existingQR&&($(existingQR).find("path:eq(0)").css("fill",color.light),$(existingQR).find("path:eq(1)").css("stroke",color.dark))},$(".form-table #qrcode-url").on("input",function(){var newUrl=$(this).val(),color=getColorSettings();clearTimeout(inputHandler),inputHandler=setTimeout(function(){qrPreviewEl.removeChild(qrPreviewEl.firstChild),affiliatewp.qrcode(qrPreviewEl,""===newUrl?affwpCreativeUrls.siteUrl:newUrl,affiliatewp.parseArgs({color:color},qrSettings)),$(qrPreviewEl).addClass("qr-code-updated"),setTimeout(function(){$(qrPreviewEl).removeClass("qr-code-updated")},200)},1e3)}),$(".affwp-color-picker").wpColorPicker({clear:function(){updateColors()},change:function(event,ui){$(this).val(ui.color.toString()),updateColors(),$(".qrcode-disclaimer").fadeIn()}}),$(".wp-picker-clear").on("click",function(){var $self=$(this),color=$self.closest(".qrcode-color-picker-container").data("default-color");$self.closest(".qrcode-color-picker-container").find("input.affwp-color-picker").val(color).trigger("change")})),$("#affwp_add_creative, #affwp_edit_creative").on("submit",function(e){var $name=$("#name");return"yes"!==$name.data("private")||!(affwp_vars.creativeDefaultName===$name.val()&&!confirm(affwp_vars.creativeUpdateNameConfirm))}),contexts={text_link:{text:""},image:{text:""},qr_code:{text:""}},prevType=$("#type").val(),$(".form-table #type").select2({width:"resolve",minimumResultsForSearch:-1,templateResult:function(option){return option.id&&"qr_code"===option.id&&option.element&&option.element.classList.contains("addProBadge")?$("<span>".concat(option.text,'</span><span class="affwp-settings-label-pro">PRO</span>')):option.text},templateSelection:function(option){return option.id&&"qr_code"===option.id&&option.element&&option.element.classList.contains("addProBadge")?$("<span>".concat(option.text,'</span><span class="affwp-settings-label-pro">PRO</span>')):option.text}}).on("change",function(e){var $text=$("#text"),$type=$("#type"),$image=$("#image"),$url=$("#url"),$qrCodeUrl=$("#qrcode-url");$text.attr("required",!1),$image.attr("required",!1),$url.attr("disabled",!1),$qrCodeUrl.attr("disabled",!0),$qrCodeUrl.closest(".affwp-education-modal-input-wrapper").find("span").removeClass("affwp-education-modal"),contexts[prevType].text=$text.val(),prevType=$type.val(),$text.val(contexts[$type.val()].text),$(".form-table").attr("data-current-context",$(this).val()),"image"===$type.val()?$image.attr("required",!0):("text_link"===$type.val()&&$text.attr("required",!0),"qr_code"===$type.val()&&$type.find("option:selected").hasClass("affwp-education-notice")?($url.attr("disabled",!0),$qrCodeUrl.closest(".affwp-education-modal-input-wrapper").find("span").addClass("affwp-education-modal")):"qr_code"===$type.val()&&($url.attr("disabled",!0),$qrCodeUrl.attr("disabled",!1)))}),$("#type").on("select2:selecting",function(e){var selectedOptionClass;$(e.target).hasClass("select2-hidden-accessible")&&(selectedOptionClass=e.params.args.data.element.className)&&selectedOptionClass.includes("affwp-education-modal")&&e.preventDefault()}),$('label[for="type"]').click(function(){$("#type").select2("open")}),$("select#status").select2({width:"resolve",minimumResultsForSearch:-1,templateResult:function(option){return option.id&&"scheduled"===option.id&&0<$(".addProBadge").length?$("<span>".concat(option.text,'</span><span class="affwp-settings-label-pro">PRO</span>')):option.text},templateSelection:function(option){return option.id&&"scheduled"===option.id&&0<$(".addProBadge").length?$("<span>".concat(option.text,'</span><span class="affwp-settings-label-pro">PRO</span>')):option.text}}).on("change",function(e){0<$(".affwp-schedule-creatives-setting").length&&"scheduled"===$("#status").val()?$(".affwp-schedule-creatives-setting").removeClass("affwp-hidden"):0<$("#affwp_edit_creative").length||$(".affwp-schedule-creatives-setting").addClass("affwp-hidden")}),$('label[for="status"]').click(function(){$("#status").select2("open")}),$(".affwp-schedule-creative-datepicker").length)&&$(".affwp-schedule-creative-datepicker").datepicker({dateFormat:"mm/dd/yy",defaultDate:"",showButtonPanel:!0,onSelect:function(date){var option=$(this).is('.affwp-schedule-creative-datepicker[name="start_date"]')?"minDate":"maxDate",dates=$(this).closest(".schedule-creative-date-fields").find("input");"minDate"==option?date=new Date($(this).datepicker("getDate").getTime()+864e5):"maxDate"==option&&(date=new Date($(this).datepicker("getDate").getTime()-864e5)),dates.not(this).datepicker("option",option,date),$(this).trigger("change")}}),$('.affwp-batch-form[data-batch_id="update-creative-names"] input[type="radio"]').on("change",function(){var $option=$(this);$("#v2160-update-creative-names").val("private"===$option.val()?affwp_vars.creativeUpgradeNoticeNo:affwp_vars.creativeUpgradeNoticeYes).removeClass("button-disabled").attr("disabled",!1)}),$('.affwp-batch-form[data-batch_id="create-login-registration-pages"] input[type="radio"]').on("change",function(){$("#v2250-create-login-registration-pages").val($(this).data("button-label")).removeClass("button-disabled").attr("disabled",!1)}),$(".notice.is-dismissible .affwp-notice-dismiss").on("click",function(e){window.location.href=$(this).data("dismiss-url")})});